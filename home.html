<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>YFCC</title>
    <link rel="icon" type="image/png" href="cricket.png">

    <script src="https://cdn.jsdelivr.net/npm/html2canvas@1.4.1/dist/html2canvas.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/jspdf@2.5.1/dist/jspdf.umd.min.js"></script>

    <style>
        :root {
            --text: #e5e7eb;
            --muted: #94a3b8;
            --radius: 18px;
            --stroke: rgba(255, 255, 255, .12);

            --green: rgba(34, 197, 94, .95);
            --blue: rgba(96, 165, 250, .95);

            --control-h: 46px;
            --control-pad-x: 14px;
            --control-font: 14px;
        }

        body {
            margin: 0;
            font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial;
            background-repeat: no-repeat;
            background-size: cover;
            color: var(--text);
            min-height: 100vh;
            padding: 28px;
        }

        body::before {
            content: "";
            position: fixed;
            inset: 0;
            background:
                linear-gradient(rgba(5, 15, 30, 0.55), rgba(5, 15, 30, 0.55)),
                url("backround.jpg");
            background-size: cover;
            background-position: center;
            z-index: -1;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
        }

        header {
            display: flex;
            flex-direction: column;
            gap: 8px;
            margin-bottom: 18px;
        }

        header h1 {
            margin: 0;
            font-size: 28px;
        }

        header p {
            margin: 0;
            color: var(--muted);
            font-size: 14px;
            line-height: 1.5;
        }

        .grid {
            display: grid;
            grid-template-columns: 1.1fr .9fr;
            gap: 16px;
            margin-top: 14px;
        }

        @media (max-width: 980px) {
            .grid {
                grid-template-columns: 1fr
            }
        }

        .card {
            background: rgba(10, 20, 35, 0.55);
            backdrop-filter: blur(14px);
            -webkit-backdrop-filter: blur(14px);
            border: 1px solid rgba(255, 255, 255, 0.12);
            border-radius: var(--radius);
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.35);
            padding: 16px;
            animation: fadeUp 0.45s ease both;
        }

        @keyframes fadeUp {
            from {
                opacity: 0;
                transform: translateY(10px);
            }

            to {
                opacity: 1;
                transform: translateY(0px);
            }
        }

        .card h2 {
            margin: 0 0 12px;
            font-size: 16px;
            display: flex;
            justify-content: space-between;
            gap: 10px;
            align-items: center;
        }

        .badge {
            font-size: 12px;
            padding: 4px 10px;
            border-radius: 999px;
            border: 1px solid rgba(255, 255, 255, .14);
            background: rgba(255, 255, 255, .06);
            color: var(--muted);
        }

        input,
        select {
            width: 100%;
            padding: 12px;
            border-radius: 14px;
            border: 1px solid rgba(255, 255, 255, .14);
            background: rgba(15, 23, 42, 0.35);
            backdrop-filter: blur(14px);
            -webkit-backdrop-filter: blur(14px);
            color: var(--text);
            outline: none;
        }

        input::placeholder {
            color: rgba(148, 163, 184, .75);
        }

        input:focus,
        select:focus {
            border-color: rgba(96, 165, 250, .75);
            box-shadow: 0 0 0 4px rgba(96, 165, 250, .15);
        }

        .row {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
            margin-top: 10px;
        }

        .two {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
        }

        @media(max-width:540px) {
            .two {
                grid-template-columns: 1fr
            }
        }

        .btn {
            padding: 12px 14px;
            border-radius: 14px;
            border: 1px solid rgba(255, 255, 255, .14);
            background: rgba(255, 255, 255, .06);
            backdrop-filter: blur(14px);
            -webkit-backdrop-filter: blur(14px);
            color: var(--text);
            cursor: pointer;
            font-weight: 700;
            transition: .18s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            box-shadow: 0 8px 18px rgba(0, 0, 0, .25);
            user-select: none;
        }

        .btn:hover {
            transform: translateY(-2px);
            background: rgba(255, 255, 255, .10);
            box-shadow: 0 12px 22px rgba(0, 0, 0, .35);
        }

        .btn:active {
            transform: translateY(0px);
        }

        .btn.primary {
            border: 1px solid rgba(34, 197, 94, .22);
            background: linear-gradient(135deg, rgba(34, 197, 94, .95), rgba(96, 165, 250, .92));
            color: #06121f;
        }

        .btn.danger {
            border: 1px solid rgba(239, 68, 68, .22);
            background: rgba(239, 68, 68, .14);
            color: #fecaca;
        }

        .btn.small {
            padding: 8px 10px;
            border-radius: 12px;
            font-size: 12px;
        }

        .divider {
            height: 1px;
            background: rgba(255, 255, 255, .12);
            margin: 14px 0;
        }

        .players {
            margin-top: 12px;
            display: flex;
            flex-direction: column;
            gap: 8px;
            max-height: 320px;
            overflow: auto;
            padding-right: 4px;
            scroll-behavior: smooth;
        }

        .players::-webkit-scrollbar {
            width: 8px;
        }

        .players::-webkit-scrollbar-track {
            background: rgba(255, 255, 255, .06);
            border-radius: 20px;
        }

        .players::-webkit-scrollbar-thumb {
            background: rgba(255, 255, 255, .18);
            border-radius: 20px;
        }

        .players::-webkit-scrollbar-thumb:hover {
            background: rgba(255, 255, 255, .28);
        }

        .players {
            scrollbar-width: thin;
            scrollbar-color: rgba(255, 255, 255, .22) rgba(255, 255, 255, .05);
        }

        .player {
            display: flex;
            align-items: center;
            justify-content: space-between;
            gap: 10px;
            padding: 10px 12px;
            border-radius: 14px;
            border: 1px solid rgba(255, 255, 255, .12);
            background: rgba(255, 255, 255, .04);
            transition: .18s ease;
        }

        .player:hover {
            transform: translateY(-2px);
            background: rgba(255, 255, 255, .06);
        }

        .left {
            display: flex;
            flex-direction: column;
            gap: 4px;
        }

        .name {
            font-weight: 800;
            font-size: 14px;
        }

        .roleTag {
            width: max-content;
            font-size: 12px;
            padding: 4px 10px;
            border-radius: 999px;
            border: 1px solid rgba(255, 255, 255, .14);
            color: rgba(226, 232, 240, .9);
            background: rgba(15, 23, 42, .35);
        }

        .teamsWrap {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 14px;
        }

        @media(max-width:980px) {
            .teamsWrap {
                grid-template-columns: 1fr
            }
        }

        .teamCard {
            border-radius: var(--radius);
            border: 1px solid rgba(255, 255, 255, 0.14);
            background: rgba(15, 25, 45, 0.45);
            backdrop-filter: blur(16px);
            -webkit-backdrop-filter: blur(16px);
            box-shadow: 0 10px 26px rgba(0, 0, 0, 0.35);
            padding: 14px;
            position: relative;
            overflow: hidden;
            transition: transform 0.25s ease, box-shadow 0.25s ease;
            animation: fadeUp 0.45s ease both;
        }

        .teamCard::before {
            content: "";
            position: absolute;
            inset: 0;
            background: radial-gradient(600px 220px at 20% 0%, rgba(96, 165, 250, 0.16), transparent 55%),
                radial-gradient(520px 220px at 85% 15%, rgba(34, 197, 94, 0.14), transparent 60%);
            pointer-events: none;
        }

        .teamCard:hover {
            transform: translateY(-3px);
            box-shadow: 0 16px 34px rgba(0, 0, 0, .45);
        }

        .teamHeader {
            display: flex;
            justify-content: space-between;
            align-items: center;
            gap: 10px;
            margin-bottom: 10px;
        }

        .teamTitle strong {
            font-size: 16px;
        }

        .list {
            display: flex;
            flex-direction: column;
            gap: 8px;
            margin-top: 10px;
            max-height: 260px;
            overflow: auto;
        }

        .list::-webkit-scrollbar {
            width: 8px;
        }

        .list::-webkit-scrollbar-track {
            background: rgba(255, 255, 255, .06);
            border-radius: 20px;
        }

        .list::-webkit-scrollbar-thumb {
            background: rgba(255, 255, 255, .18);
            border-radius: 20px;
        }

        .list::-webkit-scrollbar-thumb:hover {
            background: rgba(255, 255, 255, .28);
        }

        .listItem {
            display: flex;
            align-items: center;
            justify-content: space-between;
            gap: 10px;
            padding: 10px 12px;
            border-radius: 14px;
            background: rgba(15, 23, 42, .4);
            border: 1px solid rgba(255, 255, 255, .12);
            transition: .18s ease;
        }

        .listItem:hover {
            transform: translateY(-2px);
            background: rgba(255, 255, 255, .06);
        }

        .empty {
            padding: 14px;
            border-radius: 14px;
            border: 1px dashed rgba(255, 255, 255, .18);
            color: rgba(148, 163, 184, .9);
            text-align: center;
            background: rgba(15, 23, 42, .25);
            margin-top: 10px;
        }

        .commonBox {
            margin-top: 14px;
            padding: 14px;
            border-radius: 18px;
            border: 1px solid rgba(250, 204, 21, .28);
            background: rgba(250, 204, 21, .08);
        }

        .commonBox h3 {
            margin: 0 0 8px;
            font-size: 14px;
        }

        .toast {
            margin-top: 12px;
            padding: 10px 12px;
            border-radius: 14px;
            border: 1px solid rgba(255, 255, 255, .12);
            background: rgba(15, 23, 42, .45);
            color: rgba(226, 232, 240, .92);
            font-size: 13px;
            display: none;
        }

        .toast.show {
            display: block
        }

        .notice {
            margin-top: 10px;
            color: rgba(148, 163, 184, .95);
            font-size: 12px;
            line-height: 1.4;
        }

        #captureArea {
            border-radius: 18px;
            padding: 10px;
        }

        input,
        select,
        button {
            font-size: var(--control-font);
            line-height: 1.2;
        }

        input,
        select {
            height: var(--control-h);
            padding: 0 var(--control-pad-x);
            border-radius: 14px;
            box-sizing: border-box;
            display: flex;
            align-items: center;
            background: rgba(15, 23, 42, 0.35);
            border: 1px solid rgba(255, 255, 255, 0.14);
            backdrop-filter: blur(14px);
            -webkit-backdrop-filter: blur(14px);
            color: var(--text);
        }

        input::placeholder {
            color: rgba(148, 163, 184, 0.75);
            font-size: var(--control-font);
            line-height: var(--control-h);
        }

        input[type="number"] {
            padding-right: 12px;
        }

        select {
            appearance: none;
            -webkit-appearance: none;
            -moz-appearance: none;

            padding-right: 44px;

            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;

            background-image:
                linear-gradient(45deg, transparent 50%, rgba(226, 232, 240, .9) 50%),
                linear-gradient(135deg, rgba(226, 232, 240, .9) 50%, transparent 50%),
                linear-gradient(to right, rgba(255, 255, 255, .12), rgba(255, 255, 255, .12));
            background-position:
                calc(100% - 18px) 52%,
                calc(100% - 12px) 52%,
                calc(100% - 42px) 50%;
            background-size:
                6px 6px,
                6px 6px,
                1px 60%;
            background-repeat: no-repeat;
        }

        select:hover {
            border-color: rgba(255, 255, 255, .20);
        }

        input:focus,
        select:focus {
            border-color: rgba(96, 165, 250, .75);
            box-shadow: 0 0 0 4px rgba(96, 165, 250, .15);
            outline: none;
        }

        .btn {
            height: var(--control-h);
            padding: 0 16px;
            display: inline-flex;
            align-items: center;
            justify-content: center;
        }

        .btn.small {
            height: 34px;
            padding: 0 12px;
        }

        .two>*,
        .three>* {
            min-width: 0 !important;
        }

        input,
        select {
            width: 100%;
            max-width: 100%;
            min-width: 0;
        }

        .footer {
            display: flex;
            align-items: flex-end;
            justify-content: center;
            height: 170px;
            width: 100%;
            animation: fadeUp 0.45s ease both;
        }

        .footer p {
            color: white !important;
            font-size: 18px;
        }
    </style>
</head>

<body>
    <div class="container">
        <header>
            <h1>Team Selection YFCC</h1>
        </header>

        <div class="grid">
            <!-- LEFT -->
            <div class="card">
                <h2>Players <span class="badge" id="playerCountBadge">0 Players</span></h2>

                <div class="two">
                    <input id="playerName" type="text" placeholder="Enter player name" />
                    <select id="playerRole">
                        <option value="Batsman">Batsman</option>
                        <option value="Bowler">Bowler</option>
                        <option value="Allrounder">Allrounder</option>
                        <option value="Wicket keeper">Wicket keeper</option>
                    </select>
                </div>

                <div class="row">
                    <button class="btn primary" id="addBtn">Add Player</button>
                    <button class="btn danger" id="clearBtn">Clear All</button>
                </div>

                <div class="divider"></div>
                <h2>Player List <span class="badge">Role</span></h2>
                <div class="players" id="playersList"></div>
                <div class="toast" id="toast"></div>
            </div>

            <!-- RIGHT -->
            <div class="card">
                <h2>Team Settings <span class="badge">Customize</span></h2>

                <div class="two">
                    <input id="teamAName" type="text" placeholder="Team A Name" value="Team A" />
                    <input id="teamBName" type="text" placeholder="Team B Name" value="Team B" />
                </div>

                <div class="divider"></div>

                <h2>Common Player <span class="badge">Manual</span></h2>
                <select id="commonSelect">
                    <option value="">Auto Select (last player)</option>
                </select>

                <div class="row" style="margin-top:12px;">
                    <button class="btn primary" id="splitBtn">Split Teams</button>
                    <button class="btn" id="shuffleBtn">Shuffle & Split</button>
                    <button class="btn primary" id="gotoScorecard">Scorecard</button>
                </div>

                <div class="divider"></div>

                <div id="captureArea">
                    <h2>Teams Output <span class="badge">Role Balanced</span></h2>

                    <div class="teamsWrap">
                        <div class="teamCard">
                            <div class="teamHeader">
                                <div class="teamTitle"><strong id="teamATitle">Team A</strong></div>
                                <span class="badge" id="teamACount">0</span>
                            </div>
                            <div class="list" id="teamAList"></div>
                            <div class="empty" id="teamAEmpty">No players yet</div>
                        </div>

                        <div class="teamCard">
                            <div class="teamHeader">
                                <div class="teamTitle"><strong id="teamBTitle">Team B</strong></div>
                                <span class="badge" id="teamBCount">0</span>
                            </div>
                            <div class="list" id="teamBList"></div>
                            <div class="empty" id="teamBEmpty">No players yet</div>
                        </div>
                    </div>

                    <div class="commonBox" id="commonBox" style="display:none;">
                        <h3>‚≠ê Common Player</h3>
                        <div id="commonPlayer"></div>
                    </div>
                </div>

            </div>
        </div>
    </div>

    <div class="footer">
        <p>Developed by KQ Developers</p>
    </div>

    <script>
        // ===========================
        // LocalStorage Keys (Shared with scorecard.html)
        // ===========================
        const LS_PLAYERS = "cricket_players_role_v1";
        const LS_TEAMA = "cricket_teamA_name_role_v1";
        const LS_TEAMB = "cricket_teamB_name_role_v1";
        const LS_SPLIT = "cricket_last_split_v1";

        let players = [];
        let lastSplit = { teamA: [], teamB: [], common: null };

        const playerName = document.getElementById("playerName");
        const playerRole = document.getElementById("playerRole");
        const addBtn = document.getElementById("addBtn");
        const clearBtn = document.getElementById("clearBtn");

        const playersList = document.getElementById("playersList");
        const playerCountBadge = document.getElementById("playerCountBadge");

        const teamAName = document.getElementById("teamAName");
        const teamBName = document.getElementById("teamBName");

        const splitBtn = document.getElementById("splitBtn");
        const shuffleBtn = document.getElementById("shuffleBtn");
        const gotoScorecard = document.getElementById("gotoScorecard");

        const teamATitle = document.getElementById("teamATitle");
        const teamBTitle = document.getElementById("teamBTitle");
        const teamAList = document.getElementById("teamAList");
        const teamBList = document.getElementById("teamBList");

        const teamAEmpty = document.getElementById("teamAEmpty");
        const teamBEmpty = document.getElementById("teamBEmpty");

        const teamACount = document.getElementById("teamACount");
        const teamBCount = document.getElementById("teamBCount");

        const commonSelect = document.getElementById("commonSelect");
        const commonBox = document.getElementById("commonBox");
        const commonPlayer = document.getElementById("commonPlayer");

        const toast = document.getElementById("toast");

        function showToast(msg) {
            toast.textContent = msg;
            toast.classList.add("show");
            setTimeout(() => toast.classList.remove("show"), 1600);
        }

        function normalizeName(name) {
            return name.trim().replace(/\s+/g, " ");
        }

        function saveToLocalStorage() {
            localStorage.setItem(LS_PLAYERS, JSON.stringify(players));
            localStorage.setItem(LS_TEAMA, teamAName.value);
            localStorage.setItem(LS_TEAMB, teamBName.value);
            localStorage.setItem(LS_SPLIT, JSON.stringify(lastSplit));
        }

        function loadFromLocalStorage() {
            const savedPlayers = localStorage.getItem(LS_PLAYERS);
            const savedA = localStorage.getItem(LS_TEAMA);
            const savedB = localStorage.getItem(LS_TEAMB);
            const savedSplit = localStorage.getItem(LS_SPLIT);

            if (savedPlayers) {
                try { players = JSON.parse(savedPlayers) || []; } catch { players = []; }
            }
            if (savedA) teamAName.value = savedA;
            if (savedB) teamBName.value = savedB;

            if (savedSplit) {
                try { lastSplit = JSON.parse(savedSplit) || { teamA: [], teamB: [], common: null }; } catch { }
            }
        }

        function updatePlayerCount() {
            playerCountBadge.textContent = `${players.length} Players`;
        }

        function shuffleArray(arr) {
            for (let i = arr.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [arr[i], arr[j]] = [arr[j], arr[i]];
            }
            return arr;
        }

        function renderPlayers() {
            updatePlayerCount();
            playersList.innerHTML = "";

            if (players.length === 0) {
                playersList.innerHTML = `<div class="empty">Add players to start splitting üèè</div>`;
                updateCommonDropdown();
                saveToLocalStorage();
                return;
            }

            players.forEach((p, idx) => {
                const div = document.createElement("div");
                div.className = "player";
                div.innerHTML = `
          <div class="left">
            <div class="name">${p.name}</div>
            <span class="roleTag">${p.role}</span>
          </div>
          <button class="btn small danger" onclick="removePlayer(${idx})">Remove</button>
        `;
                playersList.appendChild(div);
            });

            updateCommonDropdown();
            saveToLocalStorage();
        }

        function removePlayer(index) {
            const removed = players.splice(index, 1);
            showToast(`Removed: ${removed[0].name}`);
            renderPlayers();
            clearTeams();
        }

        function updateCommonDropdown() {
            const currentValue = commonSelect.value;
            commonSelect.innerHTML = `<option value="">Auto Select (last player)</option>`;
            players.forEach(p => {
                const opt = document.createElement("option");
                opt.value = p.name;
                opt.textContent = `${p.name} (${p.role})`;
                commonSelect.appendChild(opt);
            });
            if ([...commonSelect.options].some(o => o.value === currentValue)) {
                commonSelect.value = currentValue;
            } else {
                commonSelect.value = "";
            }
        }

        function groupByRole(list) {
            const roles = {
                "Wicket keeper": [],
                "Batsman": [],
                "Allrounder": [],
                "Bowler": []
            };
            list.forEach(p => {
                if (!roles[p.role]) roles[p.role] = [];
                roles[p.role].push(p);
            });
            return roles;
        }

        function splitByRoleEqual(list, targetSize) {
            const roles = groupByRole(list);
            const roleOrder = ["Wicket keeper", "Batsman", "Allrounder", "Bowler"];
            roleOrder.forEach(r => shuffleArray(roles[r]));

            const teamA = [], teamB = [];

            // half-half
            roleOrder.forEach(role => {
                const arr = roles[role];
                const half = Math.floor(arr.length / 2);
                teamA.push(...arr.slice(0, half));
                teamB.push(...arr.slice(half, half + half));
                roles[role] = arr.slice(half + half); // leftovers
            });

            // leftovers to maintain equal size
            roleOrder.forEach(role => {
                roles[role].forEach(p => {
                    if (teamA.length < targetSize) teamA.push(p);
                    else teamB.push(p);
                });
            });

            // safety exact
            while (teamA.length > targetSize) teamB.push(teamA.pop());
            while (teamB.length > targetSize) teamA.push(teamB.pop());

            return { teamA, teamB };
        }

        function renderTeamList(container, emptyEl, list) {
            container.innerHTML = "";
            if (list.length === 0) {
                emptyEl.style.display = "block";
                return;
            }
            emptyEl.style.display = "none";
            list.forEach(p => {
                const item = document.createElement("div");
                item.className = "listItem";
                item.innerHTML = `
          <div style="font-weight:800">${p.name}</div>
          <span class="roleTag">${p.role}</span>
        `;
                container.appendChild(item);
            });
        }

        function clearTeams() {
            lastSplit = { teamA: [], teamB: [], common: null };
            teamAList.innerHTML = "";
            teamBList.innerHTML = "";
            teamAEmpty.style.display = "block";
            teamBEmpty.style.display = "block";
            teamACount.textContent = "0";
            teamBCount.textContent = "0";
            commonBox.style.display = "none";
            commonPlayer.innerHTML = "";
            saveToLocalStorage();
        }

        function splitTeams(doShuffle = false) {
            const A = normalizeName(teamAName.value || "Team A");
            const B = normalizeName(teamBName.value || "Team B");

            teamATitle.textContent = A;
            teamBTitle.textContent = B;

            if (players.length < 2) {
                showToast("Add at least 2 players ‚úÖ");
                return;
            }

            let list = [...players];
            if (doShuffle) list = shuffleArray(list);

            let common = null;
            if (list.length % 2 === 1) {
                const selected = commonSelect.value;
                if (selected) {
                    const found = list.find(p => p.name === selected);
                    if (found) {
                        common = found;
                        list = list.filter(p => p.name !== selected);
                    } else {
                        common = list.pop();
                    }
                } else {
                    common = list.pop();
                }
            }

            const targetSize = list.length / 2;
            const { teamA, teamB } = splitByRoleEqual(list, targetSize);

            lastSplit = { teamA, teamB, common };
            saveToLocalStorage();

            renderTeamList(teamAList, teamAEmpty, teamA);
            renderTeamList(teamBList, teamBEmpty, teamB);

            teamACount.textContent = teamA.length;
            teamBCount.textContent = teamB.length;

            if (common) {
                commonBox.style.display = "block";
                commonPlayer.innerHTML = `
          <div class="listItem" style="border-color: rgba(250,204,21,.28)">
            <div style="font-weight:800">${common.name}</div>
            <span class="roleTag">${common.role}</span>
          </div>
        `;
            } else {
                commonBox.style.display = "none";
                commonPlayer.innerHTML = "";
            }

            showToast(`Split done ‚úÖ (${teamA.length} vs ${teamB.length})`);
        }

        addBtn.addEventListener("click", () => {
            const name = normalizeName(playerName.value);
            const role = playerRole.value;

            if (!name) { showToast("Enter player name ‚úÖ"); return; }

            const exists = players.some(p => p.name.toLowerCase() === name.toLowerCase());
            if (exists) { showToast("Player already exists ‚ö†Ô∏è"); return; }

            players.push({ name, role });
            playerName.value = "";
            playerName.focus();
            renderPlayers();
            clearTeams();
            showToast("Player added ‚úÖ");
        });

        playerName.addEventListener("keydown", (e) => {
            if (e.key === "Enter") addBtn.click();
        });

        clearBtn.addEventListener("click", () => {
            players = [];
            renderPlayers();
            clearTeams();
            showToast("Cleared all players üóëÔ∏è");
        });

        splitBtn.addEventListener("click", () => splitTeams(false));
        shuffleBtn.addEventListener("click", () => splitTeams(true));

        gotoScorecard.addEventListener("click", () => {
            if (lastSplit.teamA.length === 0 || lastSplit.teamB.length === 0) {
                showToast("Split teams first ‚úÖ");
                return;
            }
            window.location.href = "scorecard.html";
        });

        // init
        loadFromLocalStorage();
        renderPlayers();

        // if split exists show it
        if (lastSplit.teamA?.length && lastSplit.teamB?.length) {
            teamATitle.textContent = teamAName.value || "Team A";
            teamBTitle.textContent = teamBName.value || "Team B";
            renderTeamList(teamAList, teamAEmpty, lastSplit.teamA);
            renderTeamList(teamBList, teamBEmpty, lastSplit.teamB);
            teamACount.textContent = lastSplit.teamA.length;
            teamBCount.textContent = lastSplit.teamB.length;

            if (lastSplit.common) {
                commonBox.style.display = "block";
                commonPlayer.innerHTML = `
          <div class="listItem" style="border-color: rgba(250,204,21,.28)">
            <div style="font-weight:800">${lastSplit.common.name}</div>
            <span class="roleTag">${lastSplit.common.role}</span>
          </div>
        `;
            }
        } else {
            clearTeams();
        }

        window.removePlayer = removePlayer;
    </script>
</body>

</html>